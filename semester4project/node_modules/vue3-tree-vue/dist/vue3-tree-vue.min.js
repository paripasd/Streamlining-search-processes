var Vue3TreeVue=function(e){"use strict";function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function n(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?t(Object(i),!0).forEach((function(t){r(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){c=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=function e(t,n){var r;null===(r=t.children)||void 0===r||r.forEach((function(r){r.checkedStatus=t.checkedStatus,n.emitItemCheckedChange(r),e(r,n)}))},u=function e(t,n){var r,i,o,a;if(t){var c=n.getParent(t.id);if(c){var l=null===(r=c.children)||void 0===r?void 0:r.every((function(e){return"true"==e.checkedStatus})),u=null===(i=c.children)||void 0===i?void 0:i.some((function(e){return"indeterminate"==e.checkedStatus})),d=null===(o=c.children)||void 0===o?void 0:o.some((function(e){return"false"==e.checkedStatus||!e.checkedStatus})),s=null===(a=c.children)||void 0===a?void 0:a.some((function(e){return"true"==e.checkedStatus}));c.checkedStatus=l?"true":u||d&&s?"indeterminate":"false",n.emitItemCheckedChange(c),e(c,n)}}},d=e.defineComponent({inheritAttrs:!0,props:{item:{type:Object,required:!0},isCheckable:{type:Boolean},canRename:{type:Boolean},selectedItem:{type:Object},treeState:{type:Object}},emits:["on-rename","onContextMenu"],setup:function(t,n){var r=n.emit,i=n.attrs,o=e.ref(),a=e.computed((function(){var e;return(null===(e=t.selectedItem)||void 0===e?void 0:e.id)==t.item.id})),c=e.computed((function(){return i.parent}));e.onMounted((function(){var e,n;null===(e=t.treeState)||void 0===e||e.trackNode(t.item,c.value),null!==(n=t.treeState)&&void 0!==n&&n.isNodeExpanded(t.item.id,t.item.type)&&f()})),e.onUnmounted((function(){var e;return null===(e=t.treeState)||void 0===e?void 0:e.untrackNode(t.item)}));e.watch((function(){return t.item.checkedStatus}),(function(){"indeterminate"==t.item.checkedStatus?o.value.indeterminate=!0:(o.value.indeterminate=!1,o.value.checked="true"==t.item.checkedStatus)}));var d=e.ref(!1),s=e.ref(),m=e.ref(),f=function(){var e,n;null===(e=m.value)||void 0===e||e.classList.toggle("rotate-90");var r=null===(n=document.getElementById(t.item.id))||void 0===n?void 0:n.getElementsByClassName("node-child");r&&r[0]&&r[0].classList.toggle("hide")};return{toggleExpand:f,chevron:m,isSelected:a,updateCheckState:function(){var e;t.item.checkedStatus=1==(null===(e=o.value)||void 0===e?void 0:e.checked)?"true":"false",t.treeState.emitItemCheckedChange(t.item),u(t.item,t.treeState),l(t.item,t.treeState)},isRenaming:d,beginRenaming:function(){t.canRename&&(d.value=!0,e.nextTick().then((function(){var e;return null===(e=s.value)||void 0===e?void 0:e.focus()})))},finishRenaming:function(){d&&r("on-rename",t.item)},parent:c,checkbox:o}}}),s={key:0,class:"horizontal-dashes"},m={key:0,style:{display:"flex"}},f={class:"d-flex",style:{"margin-left":"0.4em","margin-right":"0.4em"}},p={key:0,for:"checkbox"};d.render=function(t,n,r,i,o,a){return e.openBlock(),e.createElementBlock("div",{class:"d-flex align-items-center",onContextmenu:n[8]||(n[8]=e.withModifiers((function(e){return t.$emit("onContextMenu",{item:t.item,event:e})}),["prevent"]))},[t.$attrs.isNested?(e.openBlock(),e.createElementBlock("div",s)):e.createCommentVNode("",!0),e.createElementVNode("span",{class:e.normalizeClass(["chevron-right",{"hide-chevron":!t.item.children||t.item.children.length<1}]),ref:"chevron",onClick:n[0]||(n[0]=function(e){return t.toggleExpand()})},null,2),e.createElementVNode("div",{class:e.normalizeClass(["pointer",{"selected-tree-item":!t.isCheckable&&t.isSelected}]),style:{width:"100%"}},[t.isRenaming?e.withDirectives((e.openBlock(),e.createElementBlock("input",{key:1,ref:"rename-box","onUpdate:modelValue":n[5]||(n[5]=function(e){return t.item.name=e}),onKeyup:n[6]||(n[6]=e.withKeys((function(){return t.finishRenaming&&t.finishRenaming.apply(t,arguments)}),["enter"])),onBlur:n[7]||(n[7]=function(){return t.finishRenaming&&t.finishRenaming.apply(t,arguments)})},null,544)),[[e.vModelText,t.item.name]]):(e.openBlock(),e.createElementBlock("div",{key:0,onDblclick:n[4]||(n[4]=function(){return t.beginRenaming&&t.beginRenaming.apply(t,arguments)})},[t.isCheckable?(e.openBlock(),e.createElementBlock("div",m,[e.createElementVNode("input",{onContextmenu:n[1]||(n[1]=e.withModifiers((function(){}),["prevent"])),onChange:n[2]||(n[2]=function(){return t.updateCheckState&&t.updateCheckState.apply(t,arguments)}),type:"checkbox",ref:"checkbox"},null,544),e.createElementVNode("div",f,[e.renderSlot(t.$slots,"icon"),e.renderSlot(t.$slots,"prepend")]),t.isRenaming?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("label",p,e.toDisplayString(t.item.name),1))])):(e.openBlock(),e.createElementBlock("div",{key:1,class:"d-flex",onClick:n[3]||(n[3]=function(e){var n;return null===(n=t.treeState)||void 0===n?void 0:n.emitItemSelected(t.item)})},[e.renderSlot(t.$slots,"icon"),e.renderSlot(t.$slots,"prepend"),e.createElementVNode("span",null,e.toDisplayString(t.item.name),1)]))],32))],2)],32)};var h=e.defineComponent({name:"tree-view",props:{items:{type:Array,required:!0,default:function(){return[]}},selectedItem:{type:Object},checkedItems:{type:Array},isCheckable:{type:Boolean},hideGuideLines:{type:Boolean,default:!1},onDropValidator:{type:Function,default:function(){}},treeState:{type:Object},expandedTypes:{type:Object,default:function(){return[]}},expandedIds:{type:Object,default:function(){return[]}},expandAll:{type:Boolean,default:!1}},components:{"treeview-item":d},emits:["update:selectedItem","update:checkedItems","onContextMenu","onSelect","onCheck"],setup:function(t,r){var i,a,c,l,u,d,s,m,f,p,h=r.emit,v=r.attrs,k=e.computed((function(){return v.parent})),y=e.ref(),g=new Set([].concat(o(t.expandedTypes),o(t.expandedIds)));return null!=t.treeState?y.value=t.treeState:y.value=(i=t.selectedItem,a=function(e){return h("update:selectedItem",e)},c=t.checkedItems,l=function(e){return h("update:checkedItems",e)},u=function(e,n){return g.has(e)||g.has(n)||t.expandAll},d=function(e){return h("onSelect",e)},s=function(e){return h("onCheck",e)},m={},f={},null==c||c.forEach((function(e){return f[e.id]=e})),{getParent:function(e){return m[e]},trackNode:function(e,t){return m[e.id]=t},untrackNode:function(e){return delete m[e.id]},emitItemCheckedChange:function(e){s({item:e,change:e.checkedStatus}),"true"==e.checkedStatus?f[e.id]=e:delete f[e.id],l(Object.values(f))},emitItemSelected:function(e){d({item:e,change:"selected"}),e!==i&&(i=e,a(e))},isNodeExpanded:u}),n(n({},{addHoverClass:function(e){var t=e.currentTarget;t&&t.classList.add("drag-over")},removeHoverClass:p=function(e){var t=e.currentTarget;t&&t.classList.remove("drag-over")},onDragNode:function(e,t){t.dataTransfer&&t.dataTransfer.setData("text/plain",JSON.stringify(e))},onDropNode:function(e,t,n){if(t.dataTransfer){var r=JSON.parse(t.dataTransfer.getData("text/plain"));if(p(t),r.id===e.id)return;if(!n(r,e))return}}}),{},{parent:k,treeState:y})}}),v={id:"explorer",class:"explorer tree-item-node-parent"},k=["id","onDragstart","onDrop"];h.render=function(t,n,r,i,o,a){var c=e.resolveComponent("treeview-item"),l=e.resolveComponent("tree-view");return e.openBlock(),e.createElementBlock("ul",v,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.items,(function(r){return e.openBlock(),e.createElementBlock("li",{key:r.id,id:r.id,draggable:"",onDragover:[n[1]||(n[1]=e.withModifiers((function(){}),["stop","prevent"])),n[3]||(n[3]=e.withModifiers((function(){return t.addHoverClass&&t.addHoverClass.apply(t,arguments)}),["stop"]))],onDragenter:n[2]||(n[2]=e.withModifiers((function(){}),["stop","prevent"])),onDragstart:e.withModifiers((function(e){return t.onDragNode(r,e)}),["stop"]),onDrop:e.withModifiers((function(e){return t.onDropNode(r,e,t.onDropValidator)}),["prevent","stop"]),class:"tree-item-node",onDragleave:n[4]||(n[4]=e.withModifiers((function(){return t.removeHoverClass&&t.removeHoverClass.apply(t,arguments)}),["stop"]))},[e.createVNode(c,{class:"pointer tree-view-item",item:r,parent:t.parent,isCheckable:t.isCheckable,selectedItem:t.selectedItem,treeState:t.treeState,onContextmenu:e.withModifiers((function(e){return t.$emit("onContextMenu",{item:r,event:e})}),["prevent"])},{icon:e.withCtx((function(){return[e.renderSlot(t.$slots,"item-prepend-icon",e.normalizeProps(e.guardReactiveProps(r)))]})),prepend:e.withCtx((function(){return[e.renderSlot(t.$slots,"item-prepend",e.normalizeProps(e.guardReactiveProps(r)))]})),_:2},1032,["item","parent","isCheckable","selectedItem","treeState","onContextmenu"]),r.children&&r.children.length>0?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["node-child hide",{"hide-guidelines":t.hideGuideLines}])},[e.createVNode(l,{items:r.children,hideGuideLines:t.hideGuideLines,isNested:!0,parent:r,selectedItem:t.selectedItem,checkedItems:t.checkedItems,treeState:t.treeState,isCheckable:t.isCheckable,onOnContextMenu:n[0]||(n[0]=function(e){return t.$emit("onContextMenu",e)})},e.createSlots({_:2},[e.renderList(t.$slots,(function(n,r){return{name:r,fn:e.withCtx((function(n){return[e.renderSlot(t.$slots,r,e.normalizeProps(e.guardReactiveProps(n)))]}))}}))]),1032,["items","hideGuideLines","parent","selectedItem","checkedItems","treeState","isCheckable"])],2)):e.createCommentVNode("",!0)],40,k)})),128))])};var y,g=((y=h).install=function(e){e.component("vue3-tree-vue",y)},y),b=Object.freeze({__proto__:null,default:g});return Object.entries(b).forEach((function(e){var t=i(e,2),n=t[0],r=t[1];"default"!==n&&(g[n]=r)})),g}(Vue);